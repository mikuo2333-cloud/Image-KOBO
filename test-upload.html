<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾åƒä¸Šä¼ æµ‹è¯•å·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen p-8">
    <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-8">
        <h1 class="text-3xl font-bold text-center mb-8 text-gray-800">å›¾åƒä¸Šä¼ æµ‹è¯•å·¥å…·</h1>
        
        <div class="space-y-6">
            <div class="text-center p-8 border-2 border-dashed border-gray-300 rounded-lg">
                <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-blue-100 flex items-center justify-center">
                    <i class="fa fa-cloud-upload text-3xl text-blue-500"></i>
                </div>
                <h3 class="text-xl font-semibold mb-2">æµ‹è¯•å›¾åƒ</h3>
                <p class="text-gray-600 mb-4">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æµ‹è¯•å›¾åƒä¸Šä¼ åŠŸèƒ½</p>
                
                <button id="testUploadBtn" class="px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-all duration-300 shadow-md hover:shadow-lg">
                    å¼€å§‹æµ‹è¯•ä¸Šä¼ 
                </button>
            </div>
            
            <div class="bg-gray-50 p-6 rounded-lg">
                <h3 class="text-lg font-semibold mb-3 flex items-center">
                    <i class="fa fa-list-alt text-blue-500 mr-2"></i>
                    æµ‹è¯•æ­¥éª¤
                </h3>
                <ol class="list-decimal list-inside space-y-2 text-gray-700">
                    <li>ç‚¹å‡»ä¸Šæ–¹"å¼€å§‹æµ‹è¯•ä¸Šä¼ "æŒ‰é’®</li>
                    <li>ç³»ç»Ÿä¼šè‡ªåŠ¨æ¨¡æ‹Ÿæ–‡ä»¶é€‰æ‹©è¿‡ç¨‹</li>
                    <li>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—</li>
                    <li>æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯</li>
                </ol>
            </div>
            
            <div class="bg-gray-50 p-6 rounded-lg">
                <h3 class="text-lg font-semibold mb-3 flex items-center">
                    <i class="fa fa-info-circle text-blue-500 mr-2"></i>
                    å¦‚ä½•æŸ¥çœ‹æ—¥å¿—
                </h3>
                <div class="space-y-2 text-gray-700">
                    <p><strong>Chrome/Firefox:</strong> F12 æˆ– Ctrl+Shift+Iï¼Œåˆ‡æ¢åˆ° Console æ ‡ç­¾</p>
                    <p><strong>Edge:</strong> F12 æˆ– Ctrl+Shift+Iï¼Œåˆ‡æ¢åˆ° æ§åˆ¶å° æ ‡ç­¾</p>
                    <p><strong>Safari:</strong> Command+Option+Cï¼Œåˆ‡æ¢åˆ° æ§åˆ¶å° æ ‡ç­¾</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æµ‹è¯•å›¾åƒ URLï¼ˆä½¿ç”¨ä¹‹å‰ç”Ÿæˆçš„æµ‹è¯•å›¾åƒï¼‰
        const TEST_IMAGE_URL = 'https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/6b346c9585b745ea92eb5eccbbefd4f3~tplv-a9rns2rl98-image.image?lk3s=8e244e95&rcl=20260214151539003CF91DFB1AE64A039B&rrcfp=f06b921b&x-expires=1773645414&x-signature=ZK7anxsAnQG%2BRUuAiEYfGX3VXgk%3D';
        
        document.getElementById('testUploadBtn').addEventListener('click', async function() {
            console.log('ğŸš€ å¼€å§‹æµ‹è¯•å›¾åƒä¸Šä¼ æµç¨‹...');
            
            try {
                // æ­¥éª¤1: ä¸‹è½½æµ‹è¯•å›¾åƒ
                console.log('ğŸ“¥ æ­¥éª¤1: ä¸‹è½½æµ‹è¯•å›¾åƒ');
                const response = await fetch(TEST_IMAGE_URL);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const blob = await response.blob();
                console.log('âœ… å›¾åƒä¸‹è½½æˆåŠŸï¼Œå¤§å°:', blob.size, 'bytes');
                console.log('ğŸ“„ æ–‡ä»¶ç±»å‹:', blob.type);
                
                // æ­¥éª¤2: åˆ›å»º File å¯¹è±¡
                console.log('ğŸ“‹ æ­¥éª¤2: åˆ›å»º File å¯¹è±¡');
                const file = new File([blob], 'test-image.png', { type: blob.type });
                console.log('âœ… File å¯¹è±¡åˆ›å»ºæˆåŠŸ:', file.name, file.size, 'bytes');
                
                // æ­¥éª¤3: æ¨¡æ‹Ÿæ–‡ä»¶è¾“å…¥
                console.log('ğŸ¯ æ­¥éª¤3: æ¨¡æ‹Ÿæ–‡ä»¶è¾“å…¥');
                
                // æ£€æŸ¥æ˜¯å¦åœ¨å›¾åƒç¼–è¾‘å™¨é¡µé¢
                if (window.location.pathname.includes('image-editor')) {
                    console.log('ğŸ  å·²åœ¨å›¾åƒç¼–è¾‘å™¨é¡µé¢ï¼Œç›´æ¥è°ƒç”¨ handleImageFile');
                    
                    if (typeof handleImageFile === 'function') {
                        console.log('ğŸ”§ è°ƒç”¨ handleImageFile å‡½æ•°');
                        handleImageFile(file);
                    } else {
                        console.error('âŒ handleImageFile å‡½æ•°æœªæ‰¾åˆ°');
                    }
                } else {
                    console.log('ğŸ”— è·³è½¬åˆ°å›¾åƒç¼–è¾‘å™¨é¡µé¢å¹¶ä¼ é€’æ–‡ä»¶');
                    // åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨æ‰“å¼€å›¾åƒç¼–è¾‘å™¨é¡µé¢
                    alert('è¯·æ‰“å¼€å›¾åƒç¼–è¾‘å™¨é¡µé¢ (index.html) åå†è¿è¡Œæ­¤æµ‹è¯•');
                }
                
                console.log('ğŸ‰ æµ‹è¯•å®Œæˆï¼è¯·æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚');
                
            } catch (error) {
                console.error('âŒ æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:', error);
            }
        });
        
        // æ·»åŠ å…¨å±€æµ‹è¯•å‡½æ•°
        window.testImageUpload = async function() {
            const btn = document.getElementById('testUploadBtn');
            if (btn) {
                btn.click();
            }
        };
        
        console.log('ğŸ”§ æµ‹è¯•å·¥å…·å·²åŠ è½½å®Œæˆ');
        console.log('ğŸ’¡ æç¤º: å¯ä»¥åœ¨æ§åˆ¶å°è¿è¡Œ window.testImageUpload() å¼€å§‹æµ‹è¯•');
    </script>
</body>
</html>